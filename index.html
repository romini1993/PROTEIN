<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calc Protein Pro</title>

    <link rel="manifest" href="manifest-protein.json">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #38bdf8;
            --text: #f8fafc;
            --subtext: #94a3b8;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            color: var(--text);
            margin: 0; 
            display: flex; 
            justify-content: center; 
            min-height: 100vh;
            padding: 20px;
        }
        .container { 
            width: 100%; 
            max-width: 400px; 
            padding: 25px; 
            background: var(--card);
            border-radius: 24px; 
            border: 1px solid #334155;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            height: fit-content;
        }
        h2 { text-align: center; color: var(--accent); margin-bottom: 25px; font-size: 24px; }
        
        .input-group { margin-bottom: 18px; }
        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            color: var(--subtext);
            font-size: 13px;
            text-transform: uppercase;
        }
        input { 
            width: 100%; 
            padding: 14px; 
            background: var(--bg);
            border: 2px solid #334155; 
            border-radius: 12px; 
            font-size: 18px;
            color: white;
            font-weight: bold;
            outline: none;
            transition: 0.3s;
        }
        input:focus { border-color: var(--accent); }
        
        .result-card { 
            background: linear-gradient(135deg, #0ea5e9, #2563eb); 
            color: white; 
            padding: 20px; 
            border-radius: 20px; 
            text-align: center; 
            margin-top: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .total-val { font-size: 48px; font-weight: bold; display: block; margin: 2px 0; }
        .unit { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; opacity: 0.9; font-weight: bold; }
        
        .action-btns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        .btn {
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-share { background: #22c55e; color: white; }
        .btn-reset { background: #ef4444; color: white; }
        
        .footer { text-align: center; margin-top: 25px; font-size: 11px; color: #64748b; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>üçó Calc Protein Pro</h2>
    
    <div class="input-group">
        <label>Dada Ayam (Gram)</label>
        <input type="number" id="ayam" inputmode="decimal" placeholder="0" oninput="hitung()">
    </div>
    
    <div class="input-group">
        <label>Telur (Butir)</label>
        <input type="number" id="telur" inputmode="decimal" placeholder="0" oninput="hitung()">
    </div>
    
    <div class="input-group">
        <label>Tempe (Gram)</label>
        <input type="number" id="tempe" inputmode="decimal" placeholder="0" oninput="hitung()">
    </div>
    
    <div class="input-group">
        <label>Tahu (Gram)</label>
        <input type="number" id="tahu" inputmode="decimal" placeholder="0" oninput="hitung()">
    </div>

    <div class="result-card">
        <span class="unit">Total Asupan Protein</span>
        <span class="total-val" id="total">0</span>
        <span class="unit">gram</span>
    </div>

    <div class="action-btns">
        <button class="btn btn-reset" onclick="resetForm()">üîÑ Reset</button>
        <button class="btn btn-share" onclick="shareData()">üì§ Kirim</button>
    </div>

    <p class="footer">PROTEIN TRACKER ‚Ä¢ GACOR EDITION</p>
</div>

<script>
    window.onload = function() {
        const saved = JSON.parse(localStorage.getItem('protein_data'));
        if (saved) {
            document.getElementById('ayam').value = saved.ayam || "";
            document.getElementById('telur').value = saved.telur || "";
            document.getElementById('tempe').value = saved.tempe || "";
            document.getElementById('tahu').value = saved.tahu || "";
            hitung();
        }
    }

    function hitung() {
        const a = parseFloat(document.getElementById('ayam').value) || 0;
        const b = parseFloat(document.getElementById('telur').value) || 0;
        const c = parseFloat(document.getElementById('tempe').value) || 0;
        const d = parseFloat(document.getElementById('tahu').value) || 0;

        const proteinAyam = a * 0.31;
        const proteinTelur = b * 6;
        const proteinTempe = c * 0.19;
        const proteinTahu = d * 0.08;

        const grandTotal = proteinAyam + proteinTelur + proteinTempe + proteinTahu;
        
        document.getElementById('total').innerText = grandTotal.toLocaleString('id-ID', {
            minimumFractionDigits: 0,
            maximumFractionDigits: 1
        });

        const data = { ayam: a, telur: b, tempe: c, tahu: d };
        localStorage.setItem('protein_data', JSON.stringify(data));
    }

    function resetForm() {
        if(confirm("Reset semua inputan?")) {
            document.querySelectorAll('input').forEach(i => i.value = "");
            document.getElementById('total').innerText = "0";
            localStorage.removeItem('protein_data');
        }
    }

    function shareData() {
        const a = document.getElementById('ayam').value || 0;
        const b = document.getElementById('telur').value || 0;
        const c = document.getElementById('tempe').value || 0;
        const d = document.getElementById('tahu').value || 0;
        const total = document.getElementById('total').innerText;

        // Ambil hari, tanggal, dan waktu sekarang
        const sekarang = new Date();
        const opsiTanggal = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const opsiWaktu = { hour: '2-digit', minute: '2-digit', hour12: false };
        
        const tgl = sekarang.toLocaleDateString('id-ID', opsiTanggal);
        const wkt = sekarang.toLocaleTimeString('id-ID', opsiWaktu);

        const teks = `üçó *LAPORAN ASUPAN PROTEIN* üçó\n` +
                     `üìÖ _${tgl} | ${wkt} WIB_\n\n` +
                     `‚Ä¢ Dada Ayam: ${a} gram\n` +
                     `‚Ä¢ Telur: ${b} butir\n` +
                     `‚Ä¢ Tempe: ${c} gram\n` +
                     `‚Ä¢ Tahu: ${d} gram\n\n` +
                     `*Total Protein: ${total} gram*\n\n` +
                     `Data sudah tercatat sesuai timbangan.`;

        if (navigator.share) {
            navigator.share({
                title: 'Calc Protein',
                text: teks
            }).catch(console.error);
        } else {
            window.open(`https://wa.me/?text=${encodeURIComponent(teks)}`, '_blank');
        }
    }
</script>

</body>
</html>
